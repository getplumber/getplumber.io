---
title: Docker compose Local
description: This page describes how to quickly setup a self-managed instance of Plumber for testing purposes using Docker-compose on your local computer.
sidebar:
  order: 3
  label: ‚û°Ô∏è Docker Compose Local
---


<Aside variant="caution">
**Only for testing purposes on your local computer**

This page describes how to quickly setup a self-managed instance of
Plumber for **testing purposes** using Docker-compose on **your local
computer**. This is not suitable for production
</Aside>

## üíª Requirements

- **GitLab instance version >=17.7**
- [Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)
- [Docker](https://docs.docker.com/engine/install/)

## üõ†Ô∏è Installation

<Steps>

1. ### ü¶ä Create GitLab Application

   On your GitLab instance, open the `Applications` page: `Your picture >
   Preferences > Applications` (example:
   [gitlab.com](https://gitlab.com/-/profile/applications))

   Create an application with the following information :

   <Steps>
   1. Name: `Plumber self-managed`
   2. Redirect URI : `http://localhost:3001/api/auth/gitlab/callback`
   3. Confidential: `true` (let the box checked)
   4. Scopes: `api`
   </Steps>

   Click on `Save Application` and you should see the following screen:
   ![Application](./img/application_quickinstall.png)

   Keep this GitLab tab open, the `Application ID` and `Secret` will be used in
   the configuration step

2. ### üì• Setup your environment

   Clone the repository locally
   ```sh
   git clone https://github.com/getplumber/platform.git plumber-platform
   cd plumber-platform
   ```

   Create your configuration file
   ```sh
   cp .env.local.example .env
   ```

3. ### üìö Update the configuration

   Edit the `.env` file:

   - Copy/paste the `Application ID` and the `Secret` from
     the GitLab application you just created

      ```bash title=".env"
      GITLAB_OAUTH2_CLIENT_ID="<application-id>"
      GITLAB_OAUTH2_CLIENT_SECRET="<application-secret>"
      ```

   - Replace `<your-gitlab-url>` by domain of your GitLab server

      ```bash title=".env"
      JOBS_GITLAB_URL="https://<your-gitlab-url>"
      ```

   - **If you want to connect Plumber to a specific GitLab group only**: add the path of the group in `ORGANIZATION` variable (to run the onboarding, you must be at least **Maintainer in this group**)
      ```bash title=".env"
      ORGANIZATION="<group-path>"
      ```

   - **If you want to connect Plumber to the whole GitLab instance**: let the `ORGANIZATION` variable empty (to run the onboarding, you must be a **GitLab instance Admin**)
      ```bash title=".env"
      ORGANIZATION=""
      ```

   Run the following commands to generate random secrets for all components:

   ```bash
   sed -i."" "s/REPLACE_ME_BY_SECRET_KEY/$(openssl rand -hex 32)/g" .env
   sed -i."" "s/REPLACE_ME_BY_JOBS_DB_PASSWORD/$(openssl rand -hex 16)/g" .env
   sed -i."" "s/REPLACE_ME_BY_JOBS_REDIS_PASSWORD/$(openssl rand -hex 16)/g" .env
   ```

4. ### üöÄ Launch Plumber!

   Start Plumber
   ```bash
   docker compose -f compose.local.yml up -d
   ```

   Open your Plumber test instance üëâ [click here üéâ](http://localhost:3000)

</Steps>

## ‚è´ Update Plumber

Follow these steps to update your self-managed instance to a new version:

<Steps>

1. Navigate to the location of your
   [`platform`](https://github.com/getplumber/platform/) git repository

2. Update it
   ```sh
   git pull
   ```

3. Open the `.env.local.example` file and copy the values of
   `FRONTEND_IMAGE_TAG` and `BACKEND_IMAGE_TAG` variables

4. Edit the `.env` file by updating values of `FRONTEND_IMAGE_TAG` and
   `BACKEND_IMAGE_TAG` variables with the values previously copied
   ```sh title=".env" hl_lines="1-2"
   FRONTEND_IMAGE_TAG="<new frontend version>"
   BACKEND_IMAGE_TAG="<new backend version>"
   ```

5. Restart your containers
   ```sh
   docker compose -f compose.local.yml up -d
   ```

6. You have successfully updated Plumber on your server üéâ

</Steps>

